<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SD_Modules: bmx160/Fusion/FusionAhrs.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SD_Modules
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Code modules used in SailData firmwares</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_fusion_ahrs_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">FusionAhrs.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The AHRS sensor fusion algorithm to combines gyroscope, accelerometer, and magnetometer measurements into a single measurement of orientation relative to the Earth (NWU convention).  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="_fusion_ahrs_8h_source.html">FusionAhrs.h</a>&quot;</code><br />
<code>#include &lt;float.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for FusionAhrs.c:</div>
<div class="dyncontent">
<div class="center"><img src="_fusion_ahrs_8c__incl.png" border="0" usemap="#bmx160_2_fusion_2_fusion_ahrs_8c" alt=""/></div>
<map name="bmx160_2_fusion_2_fusion_ahrs_8c" id="bmx160_2_fusion_2_fusion_ahrs_8c">
<area shape="rect" title="The AHRS sensor fusion algorithm to combines gyroscope, accelerometer, and magnetometer measurements ..." alt="" coords="152,5,344,32"/>
<area shape="rect" href="_fusion_ahrs_8h.html" title="The AHRS sensor fusion algorithm to combines gyroscope, accelerometer, and magnetometer measurements ..." alt="" coords="112,80,211,107"/>
<area shape="rect" title=" " alt="" coords="166,229,229,256"/>
<area shape="rect" title=" " alt="" coords="285,80,344,107"/>
<area shape="rect" href="_fusion_types_8h.html" title="Common types and their associated operations." alt="" coords="5,155,112,181"/>
<area shape="rect" title=" " alt="" coords="136,155,211,181"/>
<area shape="rect" title=" " alt="" coords="26,229,91,256"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a9c729ed62d65a8cb443029fe63e50d44"><td class="memItemLeft" align="right" valign="top"><a id="a9c729ed62d65a8cb443029fe63e50d44"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_fusion_ahrs_8c.html#a9c729ed62d65a8cb443029fe63e50d44">INITIAL_GAIN</a>&#160;&#160;&#160;(10.0f)</td></tr>
<tr class="memdesc:a9c729ed62d65a8cb443029fe63e50d44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initial gain used during the initialisation period. The gain used by each algorithm iteration will ramp down from this initial gain to the specified algorithm gain over the initialisation period. <br /></td></tr>
<tr class="separator:a9c729ed62d65a8cb443029fe63e50d44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8316308d431356c7e6028e901b81582f"><td class="memItemLeft" align="right" valign="top"><a id="a8316308d431356c7e6028e901b81582f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_fusion_ahrs_8c.html#a8316308d431356c7e6028e901b81582f">INITIALISATION_PERIOD</a>&#160;&#160;&#160;(3.0f)</td></tr>
<tr class="memdesc:a8316308d431356c7e6028e901b81582f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialisation period (in seconds). <br /></td></tr>
<tr class="separator:a8316308d431356c7e6028e901b81582f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbcee443d6d55cb8600b3f240f5cf907"><td class="memItemLeft" align="right" valign="top"><a id="acbcee443d6d55cb8600b3f240f5cf907"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>Q</b>&#160;&#160;&#160;fusionAhrs-&gt;quaternion.element</td></tr>
<tr class="separator:acbcee443d6d55cb8600b3f240f5cf907"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbcee443d6d55cb8600b3f240f5cf907"><td class="memItemLeft" align="right" valign="top"><a id="acbcee443d6d55cb8600b3f240f5cf907"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>Q</b>&#160;&#160;&#160;fusionAhrs-&gt;quaternion.element</td></tr>
<tr class="separator:acbcee443d6d55cb8600b3f240f5cf907"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a955f504eccf76b4eb2489c0adab03121"><td class="memItemLeft" align="right" valign="top"><a id="a955f504eccf76b4eb2489c0adab03121"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>A</b>&#160;&#160;&#160;fusionAhrs-&gt;linearAcceleration.axis</td></tr>
<tr class="separator:a955f504eccf76b4eb2489c0adab03121"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbcee443d6d55cb8600b3f240f5cf907"><td class="memItemLeft" align="right" valign="top"><a id="acbcee443d6d55cb8600b3f240f5cf907"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>Q</b>&#160;&#160;&#160;fusionAhrs-&gt;quaternion.element</td></tr>
<tr class="separator:acbcee443d6d55cb8600b3f240f5cf907"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a568994ef9b159dbc200a0cdadc79ed90"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_fusion_ahrs_8c.html#a568994ef9b159dbc200a0cdadc79ed90">FusionAhrsInitialise</a> (<a class="el" href="struct_fusion_ahrs.html">FusionAhrs</a> *const fusionAhrs, const float gain)</td></tr>
<tr class="memdesc:a568994ef9b159dbc200a0cdadc79ed90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises the AHRS algorithm structure.  <a href="_fusion_ahrs_8c.html#a568994ef9b159dbc200a0cdadc79ed90">More...</a><br /></td></tr>
<tr class="separator:a568994ef9b159dbc200a0cdadc79ed90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33ed934c6bcdb50cd98c88c1c0f4ad3c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_fusion_ahrs_8c.html#a33ed934c6bcdb50cd98c88c1c0f4ad3c">FusionAhrsSetGain</a> (<a class="el" href="struct_fusion_ahrs.html">FusionAhrs</a> *const fusionAhrs, const float gain)</td></tr>
<tr class="memdesc:a33ed934c6bcdb50cd98c88c1c0f4ad3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the AHRS algorithm gain. The gain must be equal or greater than zero.  <a href="_fusion_ahrs_8c.html#a33ed934c6bcdb50cd98c88c1c0f4ad3c">More...</a><br /></td></tr>
<tr class="separator:a33ed934c6bcdb50cd98c88c1c0f4ad3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee13f8ed82a6a684013c7227b87197c8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_fusion_ahrs_8c.html#aee13f8ed82a6a684013c7227b87197c8">FusionAhrsSetMagneticField</a> (<a class="el" href="struct_fusion_ahrs.html">FusionAhrs</a> *const fusionAhrs, const float minimumMagneticField, const float maximumMagneticField)</td></tr>
<tr class="memdesc:aee13f8ed82a6a684013c7227b87197c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the minimum and maximum valid magnetic field magnitudes in uT.  <a href="_fusion_ahrs_8c.html#aee13f8ed82a6a684013c7227b87197c8">More...</a><br /></td></tr>
<tr class="separator:aee13f8ed82a6a684013c7227b87197c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00bfb227b100a623ffca78b03ccafaf8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_fusion_ahrs_8c.html#a00bfb227b100a623ffca78b03ccafaf8">FusionAhrsUpdate</a> (<a class="el" href="struct_fusion_ahrs.html">FusionAhrs</a> *const fusionAhrs, const <a class="el" href="union_fusion_vector3.html">FusionVector3</a> gyroscope, const <a class="el" href="union_fusion_vector3.html">FusionVector3</a> accelerometer, const <a class="el" href="union_fusion_vector3.html">FusionVector3</a> magnetometer, const float samplePeriod)</td></tr>
<tr class="memdesc:a00bfb227b100a623ffca78b03ccafaf8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the AHRS algorithm. This function should be called for each new gyroscope measurement.  <a href="_fusion_ahrs_8c.html#a00bfb227b100a623ffca78b03ccafaf8">More...</a><br /></td></tr>
<tr class="separator:a00bfb227b100a623ffca78b03ccafaf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e942d9b2fe7dacb487e13c698b71ee4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_fusion_ahrs_8c.html#a1e942d9b2fe7dacb487e13c698b71ee4">FusionAhrsUpdateWithoutMagnetometer</a> (<a class="el" href="struct_fusion_ahrs.html">FusionAhrs</a> *const fusionAhrs, const <a class="el" href="union_fusion_vector3.html">FusionVector3</a> gyroscope, const <a class="el" href="union_fusion_vector3.html">FusionVector3</a> accelerometer, const float samplePeriod)</td></tr>
<tr class="memdesc:a1e942d9b2fe7dacb487e13c698b71ee4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the AHRS algorithm. This function should be called for each new gyroscope measurement.  <a href="_fusion_ahrs_8c.html#a1e942d9b2fe7dacb487e13c698b71ee4">More...</a><br /></td></tr>
<tr class="separator:a1e942d9b2fe7dacb487e13c698b71ee4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dc9f8a18b8a2a5ecc5ce9c01437d117"><td class="memItemLeft" align="right" valign="top"><a class="el" href="union_fusion_quaternion.html">FusionQuaternion</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_fusion_ahrs_8c.html#a7dc9f8a18b8a2a5ecc5ce9c01437d117">FusionAhrsGetQuaternion</a> (const <a class="el" href="struct_fusion_ahrs.html">FusionAhrs</a> *const fusionAhrs)</td></tr>
<tr class="memdesc:a7dc9f8a18b8a2a5ecc5ce9c01437d117"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the quaternion describing the sensor relative to the Earth.  <a href="_fusion_ahrs_8c.html#a7dc9f8a18b8a2a5ecc5ce9c01437d117">More...</a><br /></td></tr>
<tr class="separator:a7dc9f8a18b8a2a5ecc5ce9c01437d117"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6290ab05218e4e76ef2dc7843e88ae62"><td class="memItemLeft" align="right" valign="top"><a class="el" href="union_fusion_vector3.html">FusionVector3</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_fusion_ahrs_8c.html#a6290ab05218e4e76ef2dc7843e88ae62">FusionAhrsGetLinearAcceleration</a> (const <a class="el" href="struct_fusion_ahrs.html">FusionAhrs</a> *const fusionAhrs)</td></tr>
<tr class="memdesc:a6290ab05218e4e76ef2dc7843e88ae62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the linear acceleration measurement equal to the accelerometer measurement with the 1 g of gravity removed.  <a href="_fusion_ahrs_8c.html#a6290ab05218e4e76ef2dc7843e88ae62">More...</a><br /></td></tr>
<tr class="separator:a6290ab05218e4e76ef2dc7843e88ae62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addaca4e65f0be8b299bb6df66aa804fb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="union_fusion_vector3.html">FusionVector3</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_fusion_ahrs_8c.html#addaca4e65f0be8b299bb6df66aa804fb">FusionAhrsGetEarthAcceleration</a> (const <a class="el" href="struct_fusion_ahrs.html">FusionAhrs</a> *const fusionAhrs)</td></tr>
<tr class="memdesc:addaca4e65f0be8b299bb6df66aa804fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the Earth acceleration measurement equal to linear acceleration in the Earth coordinate frame.  <a href="_fusion_ahrs_8c.html#addaca4e65f0be8b299bb6df66aa804fb">More...</a><br /></td></tr>
<tr class="separator:addaca4e65f0be8b299bb6df66aa804fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b35b7d49c6203304b3e39a3c85592eb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_fusion_ahrs_8c.html#a8b35b7d49c6203304b3e39a3c85592eb">FusionAhrsReinitialise</a> (<a class="el" href="struct_fusion_ahrs.html">FusionAhrs</a> *const fusionAhrs)</td></tr>
<tr class="memdesc:a8b35b7d49c6203304b3e39a3c85592eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reinitialise the AHRS algorithm.  <a href="_fusion_ahrs_8c.html#a8b35b7d49c6203304b3e39a3c85592eb">More...</a><br /></td></tr>
<tr class="separator:a8b35b7d49c6203304b3e39a3c85592eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac19677a4e53acbb4c16d7ce5d00ed5f0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_fusion_ahrs_8c.html#ac19677a4e53acbb4c16d7ce5d00ed5f0">FusionAhrsIsInitialising</a> (const <a class="el" href="struct_fusion_ahrs.html">FusionAhrs</a> *const fusionAhrs)</td></tr>
<tr class="memdesc:ac19677a4e53acbb4c16d7ce5d00ed5f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true while the AHRS algorithm is initialising.  <a href="_fusion_ahrs_8c.html#ac19677a4e53acbb4c16d7ce5d00ed5f0">More...</a><br /></td></tr>
<tr class="separator:ac19677a4e53acbb4c16d7ce5d00ed5f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3eec005410f05a2dd53956bec727bdd9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_fusion_ahrs_8c.html#a3eec005410f05a2dd53956bec727bdd9">FusionAhrsSetYaw</a> (<a class="el" href="struct_fusion_ahrs.html">FusionAhrs</a> *const fusionAhrs, const float yaw)</td></tr>
<tr class="memdesc:a3eec005410f05a2dd53956bec727bdd9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the yaw component of the orientation measurement provided by the AHRS algorithm. This function can be used to reset drift in yaw when the AHRS algorithm is being used without a magnetometer.  <a href="_fusion_ahrs_8c.html#a3eec005410f05a2dd53956bec727bdd9">More...</a><br /></td></tr>
<tr class="separator:a3eec005410f05a2dd53956bec727bdd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The AHRS sensor fusion algorithm to combines gyroscope, accelerometer, and magnetometer measurements into a single measurement of orientation relative to the Earth (NWU convention). </p>
<dl class="section author"><dt>Author</dt><dd>Seb Madgwick The algorithm behaviour is governed by a gain. A low gain will decrease the influence of the accelerometer and magnetometer so that the algorithm will better reject disturbances causes by translational motion and temporary magnetic distortions. However, a low gain will also increase the risk of drift due to gyroscope calibration errors. A typical gain value suitable for most applications is 0.5.</dd></dl>
<p>The algorithm allows the application to define a minimum and maximum valid magnetic field magnitude. The algorithm will ignore magnetic measurements that fall outside of this range. This allows the algorithm to reject magnetic measurements that do not represent the direction of magnetic North. The typical magnitude of the Earth's magnetic field is between 20 uT and 70 uT.</p>
<p>The algorithm can be used without a magnetometer. Measurements of orientation obtained using only gyroscope and accelerometer measurements can be expected to drift in the yaw component of orientation only. The application can reset the drift in yaw by setting the yaw to a specified angle at any time.</p>
<p>The algorithm provides the measurement of orientation as a quaternion. The library includes functions for converting this quaternion to a rotation matrix and Euler angles.</p>
<p>The algorithm also provides a measurement of linear acceleration and Earth acceleration. Linear acceleration is equal to the accelerometer measurement with the 1 g of gravity removed. Earth acceleration is a measurement of linear acceleration in the Earth coordinate frame. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="addaca4e65f0be8b299bb6df66aa804fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#addaca4e65f0be8b299bb6df66aa804fb">&#9670;&nbsp;</a></span>FusionAhrsGetEarthAcceleration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="union_fusion_vector3.html">FusionVector3</a> FusionAhrsGetEarthAcceleration </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_fusion_ahrs.html">FusionAhrs</a> *const&#160;</td>
          <td class="paramname"><em>fusionAhrs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the Earth acceleration measurement equal to linear acceleration in the Earth coordinate frame. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fusionAhrs</td><td>AHRS algorithm structure. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Earth acceleration measurement. </dd></dl>

</div>
</div>
<a id="a6290ab05218e4e76ef2dc7843e88ae62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6290ab05218e4e76ef2dc7843e88ae62">&#9670;&nbsp;</a></span>FusionAhrsGetLinearAcceleration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="union_fusion_vector3.html">FusionVector3</a> FusionAhrsGetLinearAcceleration </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_fusion_ahrs.html">FusionAhrs</a> *const&#160;</td>
          <td class="paramname"><em>fusionAhrs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the linear acceleration measurement equal to the accelerometer measurement with the 1 g of gravity removed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fusionAhrs</td><td>AHRS algorithm structure. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Linear acceleration measurement. </dd></dl>

</div>
</div>
<a id="a7dc9f8a18b8a2a5ecc5ce9c01437d117"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7dc9f8a18b8a2a5ecc5ce9c01437d117">&#9670;&nbsp;</a></span>FusionAhrsGetQuaternion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="union_fusion_quaternion.html">FusionQuaternion</a> FusionAhrsGetQuaternion </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_fusion_ahrs.html">FusionAhrs</a> *const&#160;</td>
          <td class="paramname"><em>fusionAhrs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the quaternion describing the sensor relative to the Earth. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fusionAhrs</td><td>AHRS algorithm structure. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Quaternion describing the sensor relative to the Earth. </dd></dl>

</div>
</div>
<a id="a568994ef9b159dbc200a0cdadc79ed90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a568994ef9b159dbc200a0cdadc79ed90">&#9670;&nbsp;</a></span>FusionAhrsInitialise()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FusionAhrsInitialise </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_fusion_ahrs.html">FusionAhrs</a> *const&#160;</td>
          <td class="paramname"><em>fusionAhrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>gain</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialises the AHRS algorithm structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fusionAhrs</td><td>AHRS algorithm structure. </td></tr>
    <tr><td class="paramname">gain</td><td>AHRS algorithm gain. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac19677a4e53acbb4c16d7ce5d00ed5f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac19677a4e53acbb4c16d7ce5d00ed5f0">&#9670;&nbsp;</a></span>FusionAhrsIsInitialising()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool FusionAhrsIsInitialising </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_fusion_ahrs.html">FusionAhrs</a> *const&#160;</td>
          <td class="paramname"><em>fusionAhrs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true while the AHRS algorithm is initialising. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fusionAhrs</td><td>AHRS algorithm structure. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True while the AHRS algorithm is initialising. </dd></dl>

</div>
</div>
<a id="a8b35b7d49c6203304b3e39a3c85592eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b35b7d49c6203304b3e39a3c85592eb">&#9670;&nbsp;</a></span>FusionAhrsReinitialise()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FusionAhrsReinitialise </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_fusion_ahrs.html">FusionAhrs</a> *const&#160;</td>
          <td class="paramname"><em>fusionAhrs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reinitialise the AHRS algorithm. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fusionAhrs</td><td>AHRS algorithm structure. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a33ed934c6bcdb50cd98c88c1c0f4ad3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33ed934c6bcdb50cd98c88c1c0f4ad3c">&#9670;&nbsp;</a></span>FusionAhrsSetGain()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FusionAhrsSetGain </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_fusion_ahrs.html">FusionAhrs</a> *const&#160;</td>
          <td class="paramname"><em>fusionAhrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>gain</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the AHRS algorithm gain. The gain must be equal or greater than zero. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gain</td><td>AHRS algorithm gain. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aee13f8ed82a6a684013c7227b87197c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee13f8ed82a6a684013c7227b87197c8">&#9670;&nbsp;</a></span>FusionAhrsSetMagneticField()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FusionAhrsSetMagneticField </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_fusion_ahrs.html">FusionAhrs</a> *const&#160;</td>
          <td class="paramname"><em>fusionAhrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>minimumMagneticField</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>maximumMagneticField</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the minimum and maximum valid magnetic field magnitudes in uT. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fusionAhrs</td><td>AHRS algorithm structure. </td></tr>
    <tr><td class="paramname">minimumMagneticField</td><td>Minimum valid magnetic field magnitude. </td></tr>
    <tr><td class="paramname">maximumMagneticField</td><td>Maximum valid magnetic field magnitude. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3eec005410f05a2dd53956bec727bdd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3eec005410f05a2dd53956bec727bdd9">&#9670;&nbsp;</a></span>FusionAhrsSetYaw()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FusionAhrsSetYaw </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_fusion_ahrs.html">FusionAhrs</a> *const&#160;</td>
          <td class="paramname"><em>fusionAhrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>yaw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the yaw component of the orientation measurement provided by the AHRS algorithm. This function can be used to reset drift in yaw when the AHRS algorithm is being used without a magnetometer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fusionAhrs</td><td>AHRS algorithm structure. </td></tr>
    <tr><td class="paramname">yaw</td><td>Yaw angle in degrees. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a00bfb227b100a623ffca78b03ccafaf8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00bfb227b100a623ffca78b03ccafaf8">&#9670;&nbsp;</a></span>FusionAhrsUpdate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FusionAhrsUpdate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_fusion_ahrs.html">FusionAhrs</a> *const&#160;</td>
          <td class="paramname"><em>fusionAhrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="union_fusion_vector3.html">FusionVector3</a>&#160;</td>
          <td class="paramname"><em>gyroscope</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="union_fusion_vector3.html">FusionVector3</a>&#160;</td>
          <td class="paramname"><em>accelerometer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="union_fusion_vector3.html">FusionVector3</a>&#160;</td>
          <td class="paramname"><em>magnetometer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>samplePeriod</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the AHRS algorithm. This function should be called for each new gyroscope measurement. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fusionAhrs</td><td>AHRS algorithm structure. </td></tr>
    <tr><td class="paramname">gyroscope</td><td>Gyroscope measurement in degrees per second. </td></tr>
    <tr><td class="paramname">accelerometer</td><td>Accelerometer measurement in g. </td></tr>
    <tr><td class="paramname">magnetometer</td><td>Magnetometer measurement in uT. </td></tr>
    <tr><td class="paramname">samplePeriod</td><td>Sample period in seconds. This is the difference in time between the current and previous gyroscope measurements. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1e942d9b2fe7dacb487e13c698b71ee4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e942d9b2fe7dacb487e13c698b71ee4">&#9670;&nbsp;</a></span>FusionAhrsUpdateWithoutMagnetometer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FusionAhrsUpdateWithoutMagnetometer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_fusion_ahrs.html">FusionAhrs</a> *const&#160;</td>
          <td class="paramname"><em>fusionAhrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="union_fusion_vector3.html">FusionVector3</a>&#160;</td>
          <td class="paramname"><em>gyroscope</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="union_fusion_vector3.html">FusionVector3</a>&#160;</td>
          <td class="paramname"><em>accelerometer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>samplePeriod</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the AHRS algorithm. This function should be called for each new gyroscope measurement. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fusionAhrs</td><td>AHRS algorithm structure. </td></tr>
    <tr><td class="paramname">gyroscope</td><td>Gyroscope measurement in degrees per second. </td></tr>
    <tr><td class="paramname">accelerometer</td><td>Accelerometer measurement in g. </td></tr>
    <tr><td class="paramname">samplePeriod</td><td>Sample period in seconds. This is the difference in time between the current and previous gyroscope measurements. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_304be2c0a07404c0d62199ec42907081.html">bmx160</a></li><li class="navelem"><a class="el" href="dir_14bb47b71cfee9e339d3ce9c0ff28945.html">Fusion</a></li><li class="navelem"><a class="el" href="_fusion_ahrs_8c.html">FusionAhrs.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
