\hypertarget{_fusion_bias_8c}{}\doxysection{bmx160/\+Fusion/\+Fusion\+Bias.c File Reference}
\label{_fusion_bias_8c}\index{bmx160/Fusion/FusionBias.c@{bmx160/Fusion/FusionBias.c}}


The gyroscope bias correction algorithm achieves run-\/time calibration of the gyroscope bias. The algorithm will detect when the gyroscope is stationary for a set period of time and then begin to sample gyroscope measurements to calculate the bias as an average.  


{\ttfamily \#include \char`\"{}Fusion\+Bias.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}math.\+h\char`\"{}}\newline
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{_fusion_bias_8c_a6c3251ee8a118d2b7c71de0fca39cb0f}\label{_fusion_bias_8c_a6c3251ee8a118d2b7c71de0fca39cb0f}} 
\#define \mbox{\hyperlink{_fusion_bias_8c_a6c3251ee8a118d2b7c71de0fca39cb0f}{S\+T\+A\+T\+I\+O\+N\+A\+R\+Y\+\_\+\+P\+E\+R\+I\+OD}}~(5.\+0f)
\begin{DoxyCompactList}\small\item\em Minimum stationary period (in seconds) after which the the algorithm becomes active and begins sampling gyroscope measurements. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{_fusion_bias_8c_a2182e9ae3ab692d6463f5442140999c1}\label{_fusion_bias_8c_a2182e9ae3ab692d6463f5442140999c1}} 
\#define \mbox{\hyperlink{_fusion_bias_8c_a2182e9ae3ab692d6463f5442140999c1}{C\+O\+R\+N\+E\+R\+\_\+\+F\+R\+E\+Q\+U\+E\+N\+CY}}~(0.\+02f)
\begin{DoxyCompactList}\small\item\em Corner frequency (in Hz) of the high-\/pass filter used to sample the gyroscope bias. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{_fusion_bias_8c_a3360ac56dd75c9ff3a6afd3d54c8c0d2}{Fusion\+Bias\+Initialise}} (\mbox{\hyperlink{struct_fusion_bias}{Fusion\+Bias}} $\ast$const fusion\+Bias, const float threshold, const float sample\+Period)
\begin{DoxyCompactList}\small\item\em Initialises the gyroscope bias correction algorithm. \end{DoxyCompactList}\item 
\mbox{\hyperlink{union_fusion_vector3}{Fusion\+Vector3}} \mbox{\hyperlink{_fusion_bias_8c_ace3092768e381c520b44efa54ed7ca05}{Fusion\+Bias\+Update}} (\mbox{\hyperlink{struct_fusion_bias}{Fusion\+Bias}} $\ast$const fusion\+Bias, \mbox{\hyperlink{union_fusion_vector3}{Fusion\+Vector3}} gyroscope)
\begin{DoxyCompactList}\small\item\em Updates the gyroscope bias correction algorithm and returns the corrected gyroscope measurement. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{_fusion_bias_8c_acd8a050b00cfc74f03af856722d05d5c}{Fusion\+Bias\+Is\+Active}} (\mbox{\hyperlink{struct_fusion_bias}{Fusion\+Bias}} $\ast$const fusion\+Bias)
\begin{DoxyCompactList}\small\item\em Returns true if the gyroscope bias correction algorithm is active. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
The gyroscope bias correction algorithm achieves run-\/time calibration of the gyroscope bias. The algorithm will detect when the gyroscope is stationary for a set period of time and then begin to sample gyroscope measurements to calculate the bias as an average. 

\begin{DoxyAuthor}{Author}
Seb Madgwick 
\end{DoxyAuthor}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{_fusion_bias_8c_a3360ac56dd75c9ff3a6afd3d54c8c0d2}\label{_fusion_bias_8c_a3360ac56dd75c9ff3a6afd3d54c8c0d2}} 
\index{FusionBias.c@{FusionBias.c}!FusionBiasInitialise@{FusionBiasInitialise}}
\index{FusionBiasInitialise@{FusionBiasInitialise}!FusionBias.c@{FusionBias.c}}
\doxysubsubsection{\texorpdfstring{FusionBiasInitialise()}{FusionBiasInitialise()}}
{\footnotesize\ttfamily void Fusion\+Bias\+Initialise (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_fusion_bias}{Fusion\+Bias}} $\ast$const}]{fusion\+Bias,  }\item[{const float}]{threshold,  }\item[{const float}]{sample\+Period }\end{DoxyParamCaption})}



Initialises the gyroscope bias correction algorithm. 


\begin{DoxyParams}{Parameters}
{\em fusion\+Bias} & \mbox{\hyperlink{struct_fusion_bias}{Fusion\+Bias}} structure. \\
\hline
{\em threshold} & Gyroscope threshold (in degrees per second) below which the gyroscope is detected stationary. \\
\hline
{\em sample\+Period} & Nominal sample period (in seconds) corresponding the rate at which the application will update the algorithm. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{_fusion_bias_8c_acd8a050b00cfc74f03af856722d05d5c}\label{_fusion_bias_8c_acd8a050b00cfc74f03af856722d05d5c}} 
\index{FusionBias.c@{FusionBias.c}!FusionBiasIsActive@{FusionBiasIsActive}}
\index{FusionBiasIsActive@{FusionBiasIsActive}!FusionBias.c@{FusionBias.c}}
\doxysubsubsection{\texorpdfstring{FusionBiasIsActive()}{FusionBiasIsActive()}}
{\footnotesize\ttfamily bool Fusion\+Bias\+Is\+Active (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_fusion_bias}{Fusion\+Bias}} $\ast$const}]{fusion\+Bias }\end{DoxyParamCaption})}



Returns true if the gyroscope bias correction algorithm is active. 


\begin{DoxyParams}{Parameters}
{\em fusion\+Bias} & \mbox{\hyperlink{struct_fusion_bias}{Fusion\+Bias}} structure. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if the gyroscope bias correction algorithm is active. 
\end{DoxyReturn}
\mbox{\Hypertarget{_fusion_bias_8c_ace3092768e381c520b44efa54ed7ca05}\label{_fusion_bias_8c_ace3092768e381c520b44efa54ed7ca05}} 
\index{FusionBias.c@{FusionBias.c}!FusionBiasUpdate@{FusionBiasUpdate}}
\index{FusionBiasUpdate@{FusionBiasUpdate}!FusionBias.c@{FusionBias.c}}
\doxysubsubsection{\texorpdfstring{FusionBiasUpdate()}{FusionBiasUpdate()}}
{\footnotesize\ttfamily \mbox{\hyperlink{union_fusion_vector3}{Fusion\+Vector3}} Fusion\+Bias\+Update (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_fusion_bias}{Fusion\+Bias}} $\ast$const}]{fusion\+Bias,  }\item[{\mbox{\hyperlink{union_fusion_vector3}{Fusion\+Vector3}}}]{gyroscope }\end{DoxyParamCaption})}



Updates the gyroscope bias correction algorithm and returns the corrected gyroscope measurement. 


\begin{DoxyParams}{Parameters}
{\em fusion\+Bias} & \mbox{\hyperlink{struct_fusion_bias}{Fusion\+Bias}} structure. \\
\hline
{\em gyroscope} & Gyroscope measurement in degrees per second. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Corrected gyroscope measurement in degrees per second. 
\end{DoxyReturn}
