\hypertarget{group___m_c_u-_m_c_u}{}\doxysection{M\+C\+U-\/\+M\+CU Communication Driver}
\label{group___m_c_u-_m_c_u}\index{MCU-\/MCU Communication Driver@{MCU-\/MCU Communication Driver}}


Generic I\+CU Driver.  


Generic I\+CU Driver. 

This module implements a generic I\+CU (Input Capture Unit) driver. The purpose of the driver is to measure period and duty cycle of an input digital signal (P\+WM input). \begin{DoxyPrecond}{Precondition}
In order to use the I\+CU driver the {\ttfamily H\+A\+L\+\_\+\+U\+S\+E\+\_\+\+I\+CU} option must be enabled in {\ttfamily halconf.\+h}.
\end{DoxyPrecond}
\hypertarget{group___m_c_u-_m_c_u_icu_1}{}\doxysubsection{Driver State Machine}\label{group___m_c_u-_m_c_u_icu_1}
The driver implements a state machine internally, not all the driver functionalities can be used in any moment, any transition not explicitly shown in the following diagram has to be considered an error and shall be captured by an assertion (if enabled). 
\begin{DoxyImageNoCaption}
  \mbox{\includegraphics[width=\textwidth,height=\textheight/2,keepaspectratio=true]{dot_inline_dotgraph_10}}
\end{DoxyImageNoCaption}
\hypertarget{group___m_c_u-_m_c_u_icu_2}{}\doxysubsection{I\+C\+U Operations.}\label{group___m_c_u-_m_c_u_icu_2}
This driver abstracts a generic Input Capture Unit composed of\+:
\begin{DoxyItemize}
\item A clock prescaler.
\item A main up counter.
\item Two capture registers triggered by the rising and falling edges on the sampled input.
\end{DoxyItemize}The I\+CU unit can be programmed to synchronize on the rising or falling edge of the sample input\+:
\begin{DoxyItemize}
\item {\bfseries{I\+C\+U\+\_\+\+I\+N\+P\+U\+T\+\_\+\+A\+C\+T\+I\+V\+E\+\_\+\+H\+I\+GH}}, a rising edge is the start signal.
\item {\bfseries{I\+C\+U\+\_\+\+I\+N\+P\+U\+T\+\_\+\+A\+C\+T\+I\+V\+E\+\_\+\+L\+OW}}, a falling edge is the start signal.
\end{DoxyItemize}Callbacks are optionally invoked when\+:
\begin{DoxyItemize}
\item On the P\+WM de-\/activation edge.
\item On the P\+WM activation edge, measurements for the previous cycle are available from this callback and can be retrieved using {\ttfamily icu\+Get\+Period\+X()} and {\ttfamily icu\+Get\+Width\+X()}.
\end{DoxyItemize}