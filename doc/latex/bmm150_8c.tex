\hypertarget{bmm150_8c}{}\doxysection{bmx160/bmm150.c File Reference}
\label{bmm150_8c}\index{bmx160/bmm150.c@{bmx160/bmm150.c}}


Sensor driver for B\+M\+M150 sensor.  


{\ttfamily \#include \char`\"{}bmm150.\+h\char`\"{}}\newline
Include dependency graph for bmm150.\+c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=200pt]{bmm150_8c__incl}
\end{center}
\end{figure}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{bmm150_8c_a79ffa87bd4e6b1693f3ec124fb2791c9}\label{bmm150_8c_a79ffa87bd4e6b1693f3ec124fb2791c9}} 
\#define {\bfseries M\+O\+D\+E\+\_\+\+S\+E\+T\+T\+I\+N\+G\+\_\+\+S\+EL}~U\+I\+N\+T16\+\_\+C(0x000F)
\item 
\mbox{\Hypertarget{bmm150_8c_aa322031928f6392d4cac23ffdf43b0d9}\label{bmm150_8c_aa322031928f6392d4cac23ffdf43b0d9}} 
\#define {\bfseries I\+N\+T\+E\+R\+R\+U\+P\+T\+\_\+\+P\+I\+N\+\_\+\+S\+E\+T\+T\+I\+N\+G\+\_\+\+S\+EL}~U\+I\+N\+T16\+\_\+C(0x01\+F0)
\item 
\mbox{\Hypertarget{bmm150_8c_a2493e9db5f3c609e1c66f603508ebcb3}\label{bmm150_8c_a2493e9db5f3c609e1c66f603508ebcb3}} 
\#define {\bfseries I\+N\+T\+E\+R\+R\+U\+P\+T\+\_\+\+C\+O\+N\+F\+I\+G\+\_\+\+S\+EL}~U\+I\+N\+T16\+\_\+C(0x1\+E00)
\item 
\mbox{\Hypertarget{bmm150_8c_aa9fb20f3e7c7dccac3ae86511fe8bd21}\label{bmm150_8c_aa9fb20f3e7c7dccac3ae86511fe8bd21}} 
\#define {\bfseries I\+N\+T\+E\+R\+R\+U\+P\+T\+\_\+\+T\+H\+R\+E\+S\+H\+O\+L\+D\+\_\+\+C\+O\+N\+F\+I\+G\+\_\+\+S\+EL}~U\+I\+N\+T16\+\_\+C(0x6000)
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int8\+\_\+t \mbox{\hyperlink{group___b_m_m150_gab4897d93fb8406c61d6bfab44de8c054}{bmm150\+\_\+init}} (struct \mbox{\hyperlink{structbmm150__dev}{bmm150\+\_\+dev}} $\ast$dev)
\begin{DoxyCompactList}\small\item\em This A\+PI is the entry point, Call this A\+PI before using other A\+P\+Is. This A\+PI reads the chip-\/id of the sensor which is the first step to verify the sensor and updates the trim parameters of the sensor. \end{DoxyCompactList}\item 
int8\+\_\+t \mbox{\hyperlink{group___b_m_m150_ga88285b4abe005f21a5cc9392dddb9de9}{bmm150\+\_\+set\+\_\+regs}} (uint8\+\_\+t reg\+\_\+addr, uint8\+\_\+t $\ast$reg\+\_\+data, uint8\+\_\+t len, const struct \mbox{\hyperlink{structbmm150__dev}{bmm150\+\_\+dev}} $\ast$dev)
\begin{DoxyCompactList}\small\item\em This A\+PI writes the given data to the register address of the sensor. \end{DoxyCompactList}\item 
int8\+\_\+t \mbox{\hyperlink{group___b_m_m150_gac3b65c846fa1d826b2addbbef4292a9c}{bmm150\+\_\+get\+\_\+regs}} (uint8\+\_\+t reg\+\_\+addr, uint8\+\_\+t $\ast$reg\+\_\+data, uint8\+\_\+t len, const struct \mbox{\hyperlink{structbmm150__dev}{bmm150\+\_\+dev}} $\ast$dev)
\begin{DoxyCompactList}\small\item\em This A\+PI reads the data from the given register address of the sensor. \end{DoxyCompactList}\item 
int8\+\_\+t \mbox{\hyperlink{group___b_m_m150_gad53c0f1cab22067aaff73d0f172a9dbe}{bmm150\+\_\+soft\+\_\+reset}} (const struct \mbox{\hyperlink{structbmm150__dev}{bmm150\+\_\+dev}} $\ast$dev)
\begin{DoxyCompactList}\small\item\em This A\+PI is used to perform soft-\/reset of the sensor where all the registers are reset to their default values except 0x4B. \end{DoxyCompactList}\item 
int8\+\_\+t \mbox{\hyperlink{group___b_m_m150_ga6b8ebfb4d731d5880ef87ecffc72a43b}{bmm150\+\_\+set\+\_\+op\+\_\+mode}} (struct \mbox{\hyperlink{structbmm150__dev}{bmm150\+\_\+dev}} $\ast$dev)
\begin{DoxyCompactList}\small\item\em This A\+PI is used to set the power mode of the sensor. \end{DoxyCompactList}\item 
int8\+\_\+t \mbox{\hyperlink{group___b_m_m150_ga6e4a56abf879bb4ad9a263d79974d120}{bmm150\+\_\+get\+\_\+op\+\_\+mode}} (uint8\+\_\+t $\ast$op\+\_\+mode, const struct \mbox{\hyperlink{structbmm150__dev}{bmm150\+\_\+dev}} $\ast$dev)
\begin{DoxyCompactList}\small\item\em This A\+PI is used to get the power mode of the sensor. \end{DoxyCompactList}\item 
int8\+\_\+t \mbox{\hyperlink{group___b_m_m150_gafbd9773c2f5c5645d60231f0ba7e8626}{bmm150\+\_\+set\+\_\+presetmode}} (struct \mbox{\hyperlink{structbmm150__dev}{bmm150\+\_\+dev}} $\ast$dev)
\begin{DoxyCompactList}\small\item\em This A\+PI is used to set the preset mode of the sensor. \end{DoxyCompactList}\item 
int8\+\_\+t \mbox{\hyperlink{group___b_m_m150_ga96ceb625f7af0bf71a8a7ad8aa67fe2b}{bmm150\+\_\+set\+\_\+sensor\+\_\+settings}} (uint16\+\_\+t desired\+\_\+settings, const struct \mbox{\hyperlink{structbmm150__dev}{bmm150\+\_\+dev}} $\ast$dev)
\begin{DoxyCompactList}\small\item\em This A\+PI sets the sensor settings based on the desired\+\_\+settings and the dev structure configuration. \end{DoxyCompactList}\item 
int8\+\_\+t \mbox{\hyperlink{group___b_m_m150_ga12db4420b434ac786c10494dd3f80e7f}{bmm150\+\_\+get\+\_\+sensor\+\_\+settings}} (struct \mbox{\hyperlink{structbmm150__dev}{bmm150\+\_\+dev}} $\ast$dev)
\begin{DoxyCompactList}\small\item\em This A\+PI gets the sensor settings and updates the dev structure. \end{DoxyCompactList}\item 
int8\+\_\+t \mbox{\hyperlink{group___b_m_m150_gabdb1f4947a1e2639326420a9fc7a2b12}{bmm150\+\_\+read\+\_\+mag\+\_\+data}} (struct \mbox{\hyperlink{structbmm150__dev}{bmm150\+\_\+dev}} $\ast$dev)
\begin{DoxyCompactList}\small\item\em This A\+PI is used to read the magnetometer data from registers 0x42 to 0x49 and update the dev structure with the compensated mag data in micro-\/tesla. \end{DoxyCompactList}\item 
int8\+\_\+t \mbox{\hyperlink{group___b_m_m150_gaabaad6846eae116f278af4c87d432b2f}{bmm150\+\_\+perform\+\_\+self\+\_\+test}} (uint8\+\_\+t self\+\_\+test\+\_\+mode, struct \mbox{\hyperlink{structbmm150__dev}{bmm150\+\_\+dev}} $\ast$dev)
\begin{DoxyCompactList}\small\item\em This A\+PI is used to perform the complete self test (both normal and advanced) for the B\+M\+M150 sensor. \end{DoxyCompactList}\item 
int8\+\_\+t \mbox{\hyperlink{group___b_m_m150_gadee930eb8e5ef947b87ee8c217780143}{bmm150\+\_\+get\+\_\+interrupt\+\_\+status}} (struct \mbox{\hyperlink{structbmm150__dev}{bmm150\+\_\+dev}} $\ast$dev)
\begin{DoxyCompactList}\small\item\em This A\+PI is used to get the status flags of all interrupt which is used to check for the assertion of interrupts. \end{DoxyCompactList}\end{DoxyCompactItemize}
\begin{Indent}\textbf{ I\+N\+T\+E\+R\+N\+AL A\+P\+Is}\par
{\em ~\newline
 }\end{Indent}
\begin{Indent}\textbf{ B\+M\+M150 as Auxiliary Mag}\par
{\em ~\newline
 }\begin{DoxyCompactItemize}
\item 
int8\+\_\+t \mbox{\hyperlink{group___b_m_m150_gabc0895a5c1c847e18e33daf5cd69c1b6}{bmm150\+\_\+aux\+\_\+mag\+\_\+data}} (uint8\+\_\+t $\ast$aux\+\_\+data, struct \mbox{\hyperlink{structbmm150__dev}{bmm150\+\_\+dev}} $\ast$dev)
\begin{DoxyCompactList}\small\item\em This A\+PI is used to compensate the raw mag data. \end{DoxyCompactList}\end{DoxyCompactItemize}
\end{Indent}


\doxysubsection{Detailed Description}
Sensor driver for B\+M\+M150 sensor. 

