\hypertarget{group___m_i_c_r_o_s_d}{}\doxysection{Micro\+SD Driver}
\label{group___m_i_c_r_o_s_d}\index{MicroSD Driver@{MicroSD Driver}}


Generic A\+DC Driver.  


Generic A\+DC Driver. 

This module implements a generic A\+DC (Analog to Digital Converter) driver supporting a variety of buffer and conversion modes. \begin{DoxyPrecond}{Precondition}
In order to use the A\+DC driver the {\ttfamily H\+A\+L\+\_\+\+U\+S\+E\+\_\+\+A\+DC} option must be enabled in {\ttfamily halconf.\+h}.
\end{DoxyPrecond}
\hypertarget{group___x_b_e_e_adc_1}{}\doxysubsection{Driver State Machine}\label{group___x_b_e_e_adc_1}
The driver implements a state machine internally, not all the driver functionalities can be used in any moment, any transition not explicitly shown in the following diagram has to be considered an error and shall be captured by an assertion (if enabled). 
\begin{DoxyImageNoCaption}
  \mbox{\includegraphics[width=\textwidth,height=\textheight/2,keepaspectratio=true]{dot_inline_dotgraph_11}}
\end{DoxyImageNoCaption}
\hypertarget{group___x_b_e_e_adc_2}{}\doxysubsection{A\+D\+C Operations}\label{group___x_b_e_e_adc_2}
The A\+DC driver is quite complex, an explanation of the terminology and of the operational details follows.\hypertarget{group___x_b_e_e_adc_2_1}{}\doxysubsubsection{A\+D\+C Conversion Groups}\label{group___x_b_e_e_adc_2_1}
The {\ttfamily A\+D\+C\+Conversion\+Group} is the objects that specifies a physical conversion operation. This structure contains some standard fields and several implementation-\/dependent fields.~\newline
 The standard fields define the CG mode, the number of channels belonging to the CG and the optional callbacks.~\newline
 The implementation-\/dependent fields specify the physical A\+DC operation mode, the analog channels belonging to the group and any other implementation-\/specific setting. Usually the extra fields just mirror the physical A\+DC registers, please refer to the vendor\textquotesingle{}s M\+CU Reference Manual for details about the available settings. Details are also available into the documentation of the A\+DC low level drivers and in the various sample applications.\hypertarget{group___x_b_e_e_adc_2_2}{}\doxysubsubsection{A\+D\+C Conversion Modes}\label{group___x_b_e_e_adc_2_2}
The driver supports several conversion modes\+:
\begin{DoxyItemize}
\item {\bfseries{One Shot}}, the driver performs a single group conversion then stops.
\item {\bfseries{Linear Buffer}}, the driver performs a series of group conversions then stops. This mode is like a one shot conversion repeated N times, the buffer pointer increases after each conversion. The buffer is organized as an S(\+C\+G)$\ast$N samples matrix, when S(\+C\+G) is the conversion group size (number of channels) and N is the buffer depth (number of repeated conversions).
\item {\bfseries{Circular Buffer}}, much like the linear mode but the operation does not stop when the buffer is filled, it is automatically restarted with the buffer pointer wrapping back to the buffer base.
\end{DoxyItemize}\hypertarget{group___x_b_e_e_adc_2_3}{}\doxysubsubsection{A\+D\+C Callbacks}\label{group___x_b_e_e_adc_2_3}
The driver is able to invoke callbacks during the conversion process. A callback is invoked when the operation has been completed or, in circular mode, when the buffer has been filled and the operation is restarted. In circular mode a callback is also invoked when the buffer is half filled.~\newline
 The \char`\"{}half filled\char`\"{} and \char`\"{}filled\char`\"{} callbacks in circular mode allow to implement \char`\"{}streaming processing\char`\"{} of the sampled data, while the driver is busy filling one half of the buffer the application can process the other half, this allows for continuous interleaved operations.

The driver is not thread safe for performance reasons, if you need to access the A\+DC bus from multiple threads then use the {\ttfamily adc\+Acquire\+Bus()} and {\ttfamily adc\+Release\+Bus()} A\+P\+Is in order to gain exclusive access. 